<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Insert title here</title>
</head>
<body>
<button id='btn1' type='button'>요청</button><br>
<textarea id='message' cols='50' rows='10'></textarea>

<script type="text/javascript">
/* 비동기 요청
 * - 웹 브라우저에서 요청을 별도의 스레드로 처리하는 것.
 */

document.getElementById('btn1').onclick = function(event) {
	// 1. GET 요청 보내기 - 동기 요청
	// 1) 객체 준비
	var xhr = new XMLHttpRequest();
	
	// 2) 요청 정보 준비
	// - 첫 번째 파라미터: GET 또는 POST
	// - 두 번째 파라미터: URL. 요청 서버는 반드시 HTML을 받은 서버여야 한다.
	//                 만약 다른 서버에 요청한다면, 그 서버에서 응답할 때
	//                 응답헤더에 콘텐츠 사용을 허가하는 헤더를 포함해야만 응답을 처리할 수 있다.
	//   이렇게 제약을 하는 이유?
	//   - 웹 사이트에 방문하여 HTML을 받는다.
	//   - HTML 안에 자바스크립트가 들어 있다.
	//   - 특정 사이트에대 대량 요청하는 코드가 있을 수 있다.
	//   - 사용자의 의사와 상관없이 이 코드는 자동으로 실행한다.
	//   - 자신의 의사와 상관없이 범죄에 연루될 수 있다.
	//
	// - 세 번째 파라미터: true(비동기), false(동기)
	xhr.open('GET', 'test01.jsp', false);
	
	// 3) 서버에 요청하기
	// - 비동기 요청일 경우 서버에서 응답을 완료할 때까지 리턴하지 않는다.
	xhr.send();
	
	// 4) 서버의 응답 데이터 사용하기
	// - 서버의 응답 결과는 xhr 객체의 responseText 라는 이름으로 저장되어 있다.
	document.getElementById('message').value = xhr.responseText;
};
 
</script>
</body>
</html>























